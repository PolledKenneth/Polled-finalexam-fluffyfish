<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="assets/favicon.ico"/>
    <title>Flappy Fish</title>
    <link rel="stylesheet" href="style.css">
    <script src="script.js" defer></script>
    <link rel="manifest" href="manifest.json">
</head>
<body>
    <audio id="bg-music" loop>
        <source src="sounds effect/bgmsc.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>
    <div id="offline-error" style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: black; color: white; padding: 20px; border: 2px solid red; border-radius: 5px; text-align: center;">
        You are offline. Please check your internet connection.
    </div>
    
    <div class="background"></div>
    <div class="modal" id="start-modal">
        <div class="modal-content">
            <h2>Flappy Fish</h2>
            <img src="assets/fish.gif" alt="fish" style="width: 70px; height: 70px;">
            <div class="button-group">
                <button class="start-button">Start Game</button>
                <button class="mute-button" id="mute-button">Mute</button>
            </div>
        </div>
    </div>
    <div class="modal" id="game-over-modal" style="display: none;">
        <div class="modal-content">
            <h2>Game Over</h2>
            <img src="assets/fish.gif" alt="fish" style="width: 60px; height: 60px;"> 
            <p>Your Score: <span id="final-score">0</span></p>
            <p>High Score: <span id="high-score">0</span></p>
            <div class="button-group">
                <button class="play-again-button">Play Again</button>
                <button class="mute-button" id="mute-button-gameover">Mute</button>
            </div>
        </div>
    </div>
    <img src="assets/fish.gif" alt="fish-gif" class="fish" id="fish-1">
    <div class="score">
        <span class="score_title"></span>
        <span class="score_val"></span>
    </div>
    <div class="high-score">
        High Score: <span id="high-score-display">0</span>
    </div>
    <script>
        if ("serviceWorker" in navigator) {
            navigator.serviceWorker.register("service-worker.js").then(() => {
                console.log("Service Worker registered successfully.");
            }).catch((error) => {
                console.error("Service Worker registration failed:", error);
            });
        }
    </script>
</body>
</html>